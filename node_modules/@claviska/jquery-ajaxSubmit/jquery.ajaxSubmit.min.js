//
// jquery.ajaxSubmit.js - Effortlessly submit forms using AJAX and JSON
//
// Developed by Cory LaViska for A Beautiful Site, LLC
//
// Licensed under the MIT license: http://opensource.org/licenses/MIT
//
jQuery&&function(a){"use strict";function s(){var s=this,t=a(s).data("options.ajaxSubmit");a(s).addClass("ajaxSubmit-busy").find(t.loader).prop("hidden",!1)}function t(s){a(this).data("options.ajaxSubmit",s).on("submit.ajaxSubmit",c)}function e(){a(this).removeData("options.ajaxSubmit").off(".ajaxSubmit")}function i(){a(this).addClass("ajaxSubmit-disabled").find(":input").prop("disabled",!0)}function n(){a(this).removeClass("ajaxSubmit-disabled").find(":input").prop("disabled",!1)}function l(){var s=this,t=a(s).data("options.ajaxSubmit");a(s).find(".ajaxSubmit-invalid").each(function(){var e=this;a(e).removeClass("ajaxSubmit-invalid"),t.hideInvalid.call(s,e)})}function o(){var s=this,t=a(s).data("options.ajaxSubmit");a(s).find(t.message).text("").prop("hidden",!0)}function r(){f.call(this),l.call(this),o.call(this),this.reset()}function u(s){var t=this,e=a(t).data("options.ajaxSubmit");a.each(s,function(s,i){var n=a(t).find(':input[name="'+i+'"]').get(0);a(n).addClass("ajaxSubmit-invalid"),e.showInvalid.call(t,n)})}function d(s,t){var e=this,i=a(e).data("options.ajaxSubmit");a(e).find(i.message).removeClass(t?i.messageErrorClasses:i.messageSuccessClasses).addClass(t?i.messageSuccessClasses:i.messageErrorClasses).text(s).prop("hidden",!1)}function c(t){var e=this,i=a(e).data("options.ajaxSubmit");t.preventDefault(),a(e).is(".ajaxSubmit-busy")||i.before&&i.before.call(e)===!1||(o.call(e),l.call(e),s.call(e),a.ajax({url:"function"==typeof i.url?i.url.call(e):i.url,type:"function"==typeof i.method?i.method.call(e):i.method,data:"function"==typeof i.data?i.data.call(e):i.data,dataType:"json"}).done(function(a){f.call(e),a&&a.message&&d.call(e,a.message,!0),a&&a.invalid&&a.invalid.length&&u.call(e,a.invalid),i.success&&i.success.call(e,a),i.after&&i.after.call(e,a)}).fail(function(a,s,t){var n=a.responseJSON;f.call(e),n&&n.message&&d.call(e,n.message,!1),n&&n.invalid&&n.invalid.length&&u.call(e,n.invalid),i.error&&i.error.call(e,n,t),i.after&&i.after.call(e,n)}))}function f(){var s=this,t=a(s).data("options.ajaxSubmit");a(s).removeClass("ajaxSubmit-busy").find(t.loader).prop("hidden",!0)}a.ajaxSubmit={defaults:{data:function(){return a(this).serialize()},hideInvalid:function(s){a(s).closest(".form-group").removeClass("has-warning")},loader:".form-loader",message:".form-message",messageErrorClasses:"message-error",messageSuccessClasses:"message-success",method:function(){return a(this).attr("method")},showInvalid:function(s){a(s).closest(".form-group").addClass("has-warning")},url:function(){return a(this).attr("action")}}},a.extend(a.fn,{ajaxSubmit:function(l,o){switch("object"==typeof l&&(o=l),l){case"busy":return a(this).each(o===!1?f:s);case"destroy":return a(this).each(e);case"disable":return a(this).each(o===!1?n:i);case"reset":return a(this).each(r);default:return a(this).each(function(){t.call(this,a.extend({},a.ajaxSubmit.defaults,o))})}}})}(jQuery);